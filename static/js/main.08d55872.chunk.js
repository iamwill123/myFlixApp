(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){e.exports=a(205)},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},202:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),l=a.n(o),c=a(25),i=a(26),s=a(28),u=a(27),m=a(29),d=a(37),p=a(50),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return t.value;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_COLUMN":return t.value;default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOVIES":return t.value;default:return e}},E=Object(d.b)({visibilityFilter:g,sortColumn:h,movies:v}),f=a(33),b=a.n(f),w=a(51),y=a(31),S=a.n(y),O=a(20),k=a(32),j=a(112),C=a.n(j),x=a(70),M=a.n(x),I=a(63),L=a.n(I),B=a(111),T=a.n(B),N=a(107),P=a.n(N),F=a(9),R=a.n(F),U=a(108),D=a.n(U),H=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},G=a(15),_=a(6),A=a.n(_),V="https://my-flix-db-11209.herokuapp.com/login",W="https://my-flix-db-11209.herokuapp.com/user",q="https://my-flix-db-11209.herokuapp.com/movies",z="https://my-flix-db-11209.herokuapp.com/users",J=a(65),Y=a.n(J),$=function(e){var t=e.position,a=e.variant,n=e.children;return"absolute"===t?r.a.createElement(Y.a,{style:{position:"absolute",bottom:0,right:0},variant:a},n):r.a.createElement(Y.a,{variant:a},n)},K=function(e){var t=Object(n.useState)(""),a=Object(G.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(G.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(G.a)(m,2),p=d[0],g=d[1],h=Object(n.useState)(""),v=Object(G.a)(h,2),E=v[0],f=v[1],b=Object(n.useState)(""),w=Object(G.a)(b,2),y=w[0],O=w[1],k=Object(n.useState)(!1),j=Object(G.a)(k,2),C=j[0],x=j[1],M=Object(n.useState)(""),I=Object(G.a)(M,2),L=I[0],B=I[1],T=Object(n.useState)(""),N=Object(G.a)(T,2),P=N[0],F=N[1],U=Object(n.useState)(""),D=Object(G.a)(U,2),H=D[0],_=D[1];return r.a.createElement(A.a,{noValidate:!0,validated:C,onSubmit:function(t){return function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),x(!0),S.a.post(W,{Username:o,Password:E,Email:s,Birthday:p}).then(function(t){if("Created"===t.statusText){_(""),B("");var a=t.data;F("\ud83c\udf89 Hey ".concat(a.Username,", you registered successfully, please login!")),setTimeout(function(){return e.onRegister(o)},5e3)}}).catch(function(e){var t=e.response.data.errors[0],a=t.msg,n=t.param,r=t.value;t&&(_(n),B("\n            ".concat(a,"\n            [").concat(n,": ").concat(r,"]\n          "))),console.log("Error",t)})}(t)}},r.a.createElement(A.a.Group,{controlId:"formBasicEmailRegister"},r.a.createElement(A.a.Label,null,"Email address"),r.a.createElement(A.a.Control,{type:"email",placeholder:"Enter email",value:s,onChange:function(e){return u(e.target.value)},isInvalid:"Email"===H,style:{borderColor:"Email"===H&&"#dc3545"},required:!0}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Please use an email."),r.a.createElement(A.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(A.a.Group,{controlId:"formBasicUsernameRegister"},r.a.createElement(A.a.Label,null,"Username"),r.a.createElement(A.a.Control,{type:"username",placeholder:"Enter username",value:o,onChange:function(e){return l(e.target.value)},isInvalid:"Username"===H,style:{borderColor:"Username"===H&&"#dc3545"},required:!0}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Please choose a username.")),r.a.createElement(A.a.Group,{controlId:"formBasicBirthdayRegister"},r.a.createElement(A.a.Label,null,"Birthday"),r.a.createElement(A.a.Control,{type:"date",value:p,onChange:function(e){return g(e.target.value)}})),r.a.createElement(A.a.Group,{controlId:"formBasicPasswordRegister"},r.a.createElement(A.a.Label,null,"Password"),r.a.createElement(A.a.Control,{type:"password",placeholder:"Enter Password",value:E,onChange:function(e){return f(e.target.value)},required:!0}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Please provide a password.")),r.a.createElement(A.a.Group,{controlId:"formBasicConfirmPasswordRegister"},r.a.createElement(A.a.Label,null,"Confirm Password"),r.a.createElement(A.a.Control,{type:"password",placeholder:"Confirm Password",value:y,onChange:function(e){return O(e.target.value)},required:!0}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Please confirm password."),E!==y&&r.a.createElement($,{variant:"warning"},"Confirm password and password do not match.")),r.a.createElement(R.a,{variant:o&&s&&E?"outline-primary":"outline-secondary",type:"submit",disabled:!o||!s||!E.includes(y)||E!==y||P},"Register"),L&&r.a.createElement($,{variant:"danger"},L),P&&r.a.createElement($,{variant:"success"},P))},Q=a(38),X=a.n(Q),Z=function(e){return r.a.createElement(X.a,{show:e.show,onHide:e.onHide,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,{id:"contained-modal-title-vcenter"},e.heading)),r.a.createElement(X.a.Body,null,e.children),r.a.createElement(X.a.Footer,null,r.a.createElement(R.a,{variant:"outline-danger",onClick:e.onHide},"Close")))},ee=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{variant:"outline-dark",onClick:e.onModalShow},"Register"),r.a.createElement(Z,{show:e.modalShow,onHide:e.onModalClose,heading:"Registration"},r.a.createElement(K,{onRegister:e.onRegister,onHide:e.onModalClose})))},te=function(e){var t=Object(n.useState)(""),a=Object(G.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(G.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(G.a)(m,2),p=d[0],g=d[1],h=Object(n.useState)(""),v=Object(G.a)(h,2),E=v[0],f=v[1];return r.a.createElement(A.a,{noValidate:!0,validated:p,onSubmit:function(t){return function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),g(!0),S.a.post(V,{Username:o,Password:s}).then(function(t){var a=t.data;e.onLoggedIn(a)}).catch(function(e){console.log(e.response);var t=e.response.data.message;f(t)})}(t)}},r.a.createElement(A.a.Group,{controlId:"formBasicEmailLogin"},r.a.createElement(A.a.Label,null,"Username"),r.a.createElement(A.a.Control,{type:"username",placeholder:"Enter username",value:o,onChange:function(e){return l(e.target.value)}}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Please provide a Username."),!H(E)&&E.includes("Username")&&r.a.createElement($,{variant:"danger"},E),r.a.createElement(A.a.Text,{className:"text-muted"},"We'll never share your username/email with anyone else.")),r.a.createElement(A.a.Group,{controlId:"formBasicPasswordLogin"},r.a.createElement(A.a.Label,null,"Password"),r.a.createElement(A.a.Control,{type:"password",placeholder:"Password",value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement(A.a.Control.Feedback,{type:"invalid"},"Please provide your password."),!H(E)&&E.includes("Password")&&r.a.createElement($,{variant:"danger"},E)),r.a.createElement(R.a,{variant:o&&s?"outline-primary":"outline-secondary",type:"submit",disabled:!o||!s},"Login"))},ae=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{variant:"outline-primary",onClick:e.onModalShow},"Login"),r.a.createElement(Z,{show:e.modalShow,onHide:e.onModalClose,heading:"Login"},r.a.createElement(te,{onLoggedIn:e.onLoggedIn})))},ne=function(e){var t=e.user,a=e.modalShow,n=e.onModalClose,o=e.onModalShow,l=e.onRegister,c=e.onLoggedIn;return r.a.createElement(P.a,null,r.a.createElement("h1",null,"Welcome to movie.db"),r.a.createElement("p",null,"Hack up furballs rub butt on table stretch, and lick butt. Go into a room to decide you didn't want to be in there anyway put butt in owner's face mesmerizing birds. Hiding behind the couch until lured out by a feathery toy meowing non stop for food. Scratch the box annoy the old grumpy cat, start a fight and then retreat to wash when i lose but nya nya nyan but get scared by sudden appearance of cucumber rub face on everything, so purr when being pet. Sweet beast. Stare at wall turn and meow stare at wall some more meow again continue staring . Sniff other cat's butt and hang jaw half open thereafter go into a room to decide you didn't want to be in there anyway but meow meow mama. Dream about hunting birds meowwww, but stand with legs in litter box, but poop outside."),H(t)?r.a.createElement(D.a,null,r.a.createElement(ae,{onModalShow:o("login"),modalShow:a.login,onModalClose:n("login"),onLoggedIn:function(e){return c(e)}}),r.a.createElement("div",{className:"mr-2"}),r.a.createElement(ee,{onModalShow:o("register"),modalShow:a.register,onModalClose:n("register"),onRegister:function(e){return l(e)}})):r.a.createElement(O.b,{to:"/movies"},r.a.createElement(R.a,{variant:"outline-primary"},"View Movies")))},re=a(10),oe=a.n(re),le=function(e){var t=e.movie.Director;return r.a.createElement(oe.a,null,r.a.createElement(oe.a.Header,{as:"h5"},"Director"),r.a.createElement(oe.a.Body,null,r.a.createElement(oe.a.Title,null,t.Name),r.a.createElement(oe.a.Text,null,t.Bio),r.a.createElement(oe.a.Text,null,t.Birth),r.a.createElement(R.a,{variant:"outline-dark",onClick:function(){window.history.back()}},"Back")),r.a.createElement(oe.a.Footer,{className:"text-muted"},"2 days ago"))},ce=function(e){var t=e.movie.Genre;return r.a.createElement(oe.a,null,r.a.createElement(oe.a.Header,{as:"h5"},"Genre"),r.a.createElement(oe.a.Body,null,r.a.createElement(oe.a.Title,null,t.Name),r.a.createElement(oe.a.Text,null,t.Description),r.a.createElement(R.a,{variant:"outline-dark",onClick:function(){window.history.back()}},"Back")),r.a.createElement(oe.a.Footer,{className:"text-muted"},"2 days ago"))},ie=a(67),se=a.n(ie),ue=function(e){var t=e.movie;if(H(t))return r.a.createElement("p",null,"loading movie...");var a,n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,null,r.a.createElement("img",{width:64,height:64,className:"mr-3",src:(a="100",n="000000","https://via.placeholder.com/".concat(a,"/").concat(n)||t.ImagePath),alt:"movie poster placeholder"}),r.a.createElement(se.a.Body,null,r.a.createElement("h5",null,t.Title),r.a.createElement("p",null,t.Description))),r.a.createElement(R.a,{variant:"outline-dark",onClick:function(){window.history.back()}},"Back"))},me=function(e){var t=e.movie;return r.a.createElement(oe.a,{border:"info"},r.a.createElement(oe.a.Header,{as:"h5"},t.Title),r.a.createElement(oe.a.Body,null,r.a.createElement(O.b,{to:"/directors/".concat(t.Director.Name)},r.a.createElement(oe.a.Text,{style:{marginBottom:"5%"}},t.Director.Name)),r.a.createElement(oe.a.Text,{style:{marginBottom:"0"}},t.Description),r.a.createElement(O.b,{to:"/genres/".concat(t.Genre.Name)},r.a.createElement(oe.a.Text,{style:{marginBottom:"5%"}},r.a.createElement("small",{className:"text-muted"},"#",t.Genre.Name))),r.a.createElement(O.b,{to:"/movies/".concat(t._id)},r.a.createElement(R.a,{variant:"outline-dark"},"Read more"))),r.a.createElement(oe.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Released: ",t.ReleaseYear)))},de=(a(179),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return console.log("user",e),e?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Hey ","string"===typeof e?e:e.Username,"!")):null}}]),t}(n.Component)),pe=(a(180),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.users;return console.log(e),e?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Users list route"),e.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("ul",null,r.a.createElement("li",null,e.Username),r.a.createElement("li",null,e.Email)))})):null}}]),t}(n.Component)),ge=a(68),he=a.n(ge),ve=a(45),Ee=a.n(ve),fe=a(34),be=a.n(fe),we=a(62),ye=a.n(we),Se=(a(181),function(e){var t=e.user,a=e.onLoggedOut;return r.a.createElement(Ee.a,{collapseOnSelect:!0,expand:"lg",bg:"007bff-outline",variant:"light",sticky:"top"},r.a.createElement(Ee.a.Brand,null,r.a.createElement(O.b,{to:"/myFlixApp"},"Home")),r.a.createElement(Ee.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(Ee.a.Collapse,{id:"responsive-navbar-nav"},!H(t)&&r.a.createElement(he.a,{className:"mr-auto"},r.a.createElement(he.a.Link,{as:O.c,to:"/users",exact:!0},"People"),r.a.createElement(be.a,{title:"\ud83d\udc64 ".concat(t),id:"collasible-nav-dropdown"},r.a.createElement(be.a.Item,{as:O.c,to:"/profile/".concat(t),exact:!0},"Profile"),r.a.createElement(be.a.Item,{href:"#action/3.2"},"Favorites"),r.a.createElement(be.a.Item,{href:"#action/3.3"},"Settings"),r.a.createElement(be.a.Divider,null),!H(t)&&r.a.createElement(be.a.Item,{onClick:a},"Log out"))),r.a.createElement(A.a,{inline:!0},r.a.createElement(ye.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement(R.a,{variant:"outline-primary"},"Search"))))}),Oe=function(e){return r.a.createElement("div",null,"Footer bro"," ",r.a.createElement("span",{"aria-label":"emoji",role:"img"},"\ud83c\udf7f"))},ke={setMovies:function(e){return{type:"SET_MOVIES",value:e}}},je=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,users:null,movies:[],selectedMovie:null,modalShow:{login:!1,register:!1},toastMessage:{type:"",show:!1}},a.onLoggedIn=function(e){a.setState({user:e.user.Username,toastMessage:{type:"success",show:!0}},function(){localStorage.setItem("token",e.token),localStorage.setItem("user",e.user.Username),a.getMovies(e.token),setTimeout(function(){return a.setState({toastMessage:{show:!1}})},3e3)})},a.onRegister=function(e){setTimeout(a.onModalClose("register"),0),setTimeout(a.onModalShow("login"),0)},a.onLoggedOut=function(){localStorage.removeItem("token"),localStorage.removeItem("user"),setTimeout(function(){return window.location.href="/myFlixApp"},0)},a.onModalClose=function(e){return function(){"login"===e&&a.setState({modalShow:{login:!1}}),"register"===e&&a.setState({modalShow:{register:!1}})}},a.onModalShow=function(e){return function(){"login"===e&&a.setState({modalShow:{login:!0}}),"register"===e&&a.setState({modalShow:{register:!0}})}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(b.a.mark(function e(){var t,a=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("token");case 3:null!==(t=e.sent)&&this.setState({user:localStorage.getItem("user")},function(){a.getMovies(t),a.getUsers(t)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("componentDidMount",e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getMovies",value:function(){var e=Object(w.a)(b.a.mark(function e(t){var a,n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get(q,{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=e.sent,n=a.status,r=a.data,201===n&&this.props.setMovies(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getMovies",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(w.a)(b.a.mark(function e(t){var a,n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get(z,{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=e.sent,n=a.status,r=a.data,201===n&&(console.log(r),this.setState({users:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getUsers",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.modalShow,o=t.users,l=t.toastMessage,c=this.props.movies,i=r.a.createElement(M.a,null,r.a.createElement(L.a,null,r.a.createElement(T.a,null,c.map(function(e){return r.a.createElement(me,{movie:e,key:e._id})}))));return r.a.createElement(O.a,null,r.a.createElement(C.a,null,r.a.createElement(Se,{user:a,onLoggedOut:this.onLoggedOut}),r.a.createElement("div",{className:"main-view"},r.a.createElement(k.a,{exact:!0,path:"/myFlixApp",render:function(){return r.a.createElement(ne,{user:a,modalShow:n,onModalClose:e.onModalClose,onModalShow:e.onModalShow,onRegister:e.onRegister,onLoggedIn:e.onLoggedIn})}}),r.a.createElement(k.a,{exact:!0,path:"/movies",render:function(){return H(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading movies...")):i}}),r.a.createElement(k.a,{path:"/movies/:movieId",render:function(e){var t=e.match;return H(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading the movie...")):r.a.createElement(ue,{movie:c.find(function(e){return e._id===t.params.movieId})})}}),r.a.createElement(k.a,{path:"/directors/:name",render:function(e){var t=e.match;return H(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading the director...")):r.a.createElement(le,{movie:c.find(function(e){return e.Director.Name===t.params.name})})}}),r.a.createElement(k.a,{exact:!0,path:"/genres/:name",render:function(e){var t=e.match;return H(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading the genres...")):r.a.createElement(ce,{movie:c.find(function(e){return e.Genre.Name===t.params.name})})}}),r.a.createElement(k.a,{path:"/users",render:function(){return H(o)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"You must be logged in to view users list.")):r.a.createElement(pe,{users:o})}}),r.a.createElement(k.a,{path:"/profile/:username",render:function(e){var t=e.match;return H(a)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Login to view your profile.")):r.a.createElement(de,{user:a===t.params.username?a:o&&o.find(function(e){return e.Username===t.params.username})})}}),r.a.createElement(M.a,null,r.a.createElement(Oe,null),l.show&&r.a.createElement($,{position:"absolute",variant:l.type},"success"===l.type&&"Success!")))))}}]),t}(n.Component),Ce=Object(p.b)(function(e){return{movies:e.movies}},ke)(je),xe=(a(202),Object(d.c)(E)),Me=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:xe},r.a.createElement(Ce,null))}}]),t}(n.Component);a(203),a(204),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[113,1,2]]]);
//# sourceMappingURL=main.08d55872.chunk.js.map