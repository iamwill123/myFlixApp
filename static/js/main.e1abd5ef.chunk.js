(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,a){e.exports=a(216)},145:function(e,t,a){},208:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(17),i=a(29),s=a(30),u=a(33),m=a(32),d=a(34),p=a(41),f=a(14),v=function(e){return{type:"SET_USER",value:e}},h=Object(p.b)({asyncLoadingStarted:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_START":return t.value;default:return e}},asyncLoadingFinished:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_FINISH":return t.value;default:return e}},asyncLoadingError:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_ERROR":return t.value;default:return e}},visibilityFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return t.value;default:return e}},sortColumn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Title",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_COLUMN":return t.value;default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOVIES":return t.value;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.value;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return t.value;default:return e}}}),g=a(36),E=a(60),b=a.n(E),y=a(50),w=a.n(y),O=a(37),j=a.n(O),S=a(3),k=a.n(S),x=a(72),C=a.n(x),T={setFilter:function(e){return{type:"SET_FILTER",value:e}}},U=Object(f.b)(function(e){return{visibilityFilter:e.visibilityFilter,sortColumn:e.sortColumn}},T)(function(e){return r.a.createElement(k.a,{inline:!0},r.a.createElement(C.a,{onChange:function(t){return e.setFilter(t.target.value)},value:e.visibilityFilter,type:"text",placeholder:"Search by ".concat(e.sortColumn),className:"mr-sm-2"}))}),F="token",L="username",B=new(function(){function e(){Object(i.a)(this,e),this.useLocalStorage="undefined"!==typeof localStorage,this.useLocalStorage&&(this.token=localStorage.getItem(F),this.username=localStorage.getItem(L))}return Object(s.a)(e,[{key:"isLoggedIn",value:function(){return!!this.token}},{key:"setTokenAndUsername",value:function(e,t){this.token=e,this.username=t,this.useLocalStorage&&(localStorage.setItem(F,e),localStorage.setItem(L,t))}},{key:"removeTokenAndUsername",value:function(){this.token=null,this.username=null,this.useLocalStorage&&(localStorage.removeItem(F),localStorage.removeItem(L))}}]),e}()),I=(a(145),Object(g.f)(Object(f.b)(function(e){return{user:e.user}})(function(e){var t=e.user,a=e.location;return r.a.createElement(w.a,{collapseOnSelect:!0,expand:"lg",bg:"007bff-outline",variant:"light",sticky:"top"},r.a.createElement(w.a.Brand,null,r.a.createElement(l.c,{to:"/myFlixApp"},"Home")),r.a.createElement(w.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(w.a.Collapse,{id:"responsive-navbar-nav"},B.isLoggedIn()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"mr-auto"},r.a.createElement(b.a.Link,{as:l.c,to:"/myFlixApp/movies",exact:!0},"Movies"),r.a.createElement(b.a.Link,{as:l.c,to:"/myFlixApp/users",exact:!0},"People"),r.a.createElement(j.a,{title:"\ud83d\udc64 ".concat(t.Username?t.Username:"Anonymous"),id:"collasible-nav-dropdown"},r.a.createElement(j.a.Item,{as:l.c,to:"/myFlixApp/profile/".concat(t._id),exact:!0},"Profile"),r.a.createElement(j.a.Item,{href:"#action/3.2"},"Favorites"),r.a.createElement(j.a.Item,{href:"#action/3.3"},"Settings"),r.a.createElement(j.a.Divider,null),r.a.createElement(j.a.Item,{onClick:function(){B.removeTokenAndUsername(),setTimeout(function(){return window.location.href="/myFlixApp"},0)}},"Log out"))),"/movies"===a.pathname&&r.a.createElement(U,null))))}))),A=a(11),M=a.n(A),P=a(20),R=a(122),N=a.n(R),_=a(12),D=a.n(_),H=a(123),G=a.n(H),z=a(10),V=a(31),W=a.n(V),q=a(77),Y=a.n(q),J=function(e){var t=e.position,a=e.variant,n=e.children;return"absolute"===t?r.a.createElement(Y.a,{style:{position:"absolute",bottom:0,right:0},variant:a},n):r.a.createElement(Y.a,{variant:a},n)},K=a(21),$=a.n(K),Q="https://my-flix-db-11209.herokuapp.com",X="/login",Z="/user",ee="/movies",te="/users",ae=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,console.log(t),t},ne=function(){var e=Object(P.a)(M.a.mark(function e(t,a,n,r){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("".concat(Q).concat(Z),{Username:t,Password:a,Email:n,Birthday:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),re=function(){var e=Object(P.a)(M.a.mark(function e(t,a){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("".concat(Q).concat(X),{Username:t,Password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(P.a)(M.a.mark(function e(t,a){var n,r,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.get("".concat(Q).concat(Z,"/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 3:return n=e.sent,e.next=6,ae(n);case 6:return r=e.sent,o=r.data,e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(0),console.log("getCurrentUser",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(P.a)(M.a.mark(function e(t,a){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.token;case 2:return n=e.sent,e.next=5,$.a.post("".concat(Q).concat(Z,"/").concat(t,"/FavoriteMovies/").concat(a),null,{headers:{Authorization:"Bearer ".concat(n)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),le=function(){var e=Object(P.a)(M.a.mark(function e(t,a){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:return n=e.sent,e.next=5,$.a.delete("".concat(Q).concat(Z,"/").concat(t,"/FavoriteMovies/").concat(a),{headers:{Authorization:"Bearer ".concat(n)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),ie=function(){var e=Object(P.a)(M.a.mark(function e(t){var a,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.get("".concat(Q).concat(te),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.next=6,ae(a);case 6:return n=e.sent,r=n.data,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.log("getUsers",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(P.a)(M.a.mark(function e(t,a,n,r,o){var c,l,i,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("token");case 3:return c=e.sent,e.next=6,$.a.put("".concat(Q).concat(Z,"/").concat(t),{Username:a,Email:n,Birthday:r,Password:o},{headers:{Authorization:"Bearer ".concat(c)}});case 6:return l=e.sent,e.next=9,ae(l);case 9:if(i=e.sent,console.log(i),200!==(s=i.status)){e.next=14;break}return e.abrupt("return",s);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("updateUser",e.t0);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),ue=function(){var e=Object(P.a)(M.a.mark(function e(t,a){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.delete("".concat(Q).concat(Z,"/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),me=function(){var e=Object(P.a)(M.a.mark(function e(t){var a,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.get("".concat(Q).concat(ee),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.next=6,ae(a);case 6:return n=e.sent,r=n.data,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.log("getMovies",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(P.a)(M.a.mark(function e(t,a){var n,r,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.get("".concat(Q).concat(ee,"/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 3:return n=e.sent,e.next=6,ae(n);case 6:return r=e.sent,o=r.data,e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(0),console.log("getMovieById",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,a){return e.apply(this,arguments)}}(),pe=function(e){var t=Object(n.useState)(!1),a=Object(z.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),i=Object(z.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(z.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(""),h=Object(z.a)(v,2),g=h[0],E=h[1],b=Object(n.useState)(""),y=Object(z.a)(b,2),w=y[0],O=y[1],j=Object(n.useState)(""),S=Object(z.a)(j,2),x=S[0],C=S[1],T=Object(n.useState)(!1),U=Object(z.a)(T,2),F=U[0],L=U[1],B=Object(n.useState)(""),I=Object(z.a)(B,2),A=I[0],M=I[1],P=Object(n.useState)(""),R=Object(z.a)(P,2),N=R[0],_=R[1],H=Object(n.useState)(""),G=Object(z.a)(H,2),V=G[0],q=G[1];return r.a.createElement(k.a,{noValidate:!0,validated:F,onSubmit:function(t){return function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),L(!0),c(!0),ne(s,w,p,g).then(function(t){if("Created"===t.statusText){setTimeout(function(){return c(!1)},1e3),q(""),M("");var a=t.data;_("\ud83c\udf89 Hey ".concat(a.Username,", you registered successfully, please login!")),setTimeout(function(){return e.onRegister()},5e3)}}).catch(function(e){var t=e.response.data.errors[0],a=t.msg,n=t.param,r=t.value;t&&(c(!1),q(n),M("\n            ".concat(a,"\n            [").concat(n,": ").concat(r,"]\n          "))),console.log("Error",t)})}(t)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmailRegister"},r.a.createElement(k.a.Label,null,"Email address"),r.a.createElement(k.a.Control,{type:"email",placeholder:"Enter email",value:p,onChange:function(e){return f(e.target.value)},isInvalid:"Email"===V,style:{borderColor:"Email"===V&&"#dc3545"},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please use an email."),r.a.createElement(k.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(k.a.Group,{controlId:"formBasicUsernameRegister"},r.a.createElement(k.a.Label,null,"Username"),r.a.createElement(k.a.Control,{type:"username",placeholder:"Enter username",value:s,onChange:function(e){return u(e.target.value)},isInvalid:"Username"===V,style:{borderColor:"Username"===V&&"#dc3545"},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please choose a username.")),r.a.createElement(k.a.Group,{controlId:"formBasicBirthdayRegister"},r.a.createElement(k.a.Label,null,"Birthday"),r.a.createElement(k.a.Control,{type:"date",value:g,onChange:function(e){return E(e.target.value)}})),r.a.createElement(k.a.Group,{controlId:"formBasicPasswordRegister"},r.a.createElement(k.a.Label,null,"Password"),r.a.createElement(k.a.Control,{type:"password",placeholder:"Enter Password",value:w,onChange:function(e){return O(e.target.value)},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please provide a password.")),r.a.createElement(k.a.Group,{controlId:"formBasicConfirmPasswordRegister"},r.a.createElement(k.a.Label,null,"Confirm Password"),r.a.createElement(k.a.Control,{type:"password",placeholder:"Confirm Password",value:x,onChange:function(e){return C(e.target.value)},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please confirm password."),w!==x&&r.a.createElement(J,{variant:"warning"},"Confirm password and password do not match.")),r.a.createElement(D.a,{variant:s&&p&&w?"outline-primary":"outline-secondary",type:"submit",disabled:!s||!p||!w.includes(x)||w!==x||N||o},o?r.a.createElement(W.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})&&"Hold please ...":"Register"),A&&r.a.createElement(J,{variant:"danger"},A),N&&r.a.createElement(J,{variant:"success"},N))},fe=a(42),ve=a.n(fe),he=function(e){return r.a.createElement(ve.a,{show:e.show,onHide:e.onHide,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,{id:"contained-modal-title-vcenter"},e.heading)),r.a.createElement(ve.a.Body,null,e.children),r.a.createElement(ve.a.Footer,null,r.a.createElement(D.a,{variant:"outline-danger",onClick:e.onHide},"Close")))},ge=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"outline-dark",onClick:e.onModalShow},"Register"),r.a.createElement(he,{show:e.modalShow,onHide:e.onModalClose,heading:"Registration"},r.a.createElement(pe,{onRegister:e.onRegister,onHide:e.onModalClose})))},Ee=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},be=function(e){var t=Object(n.useState)(!1),a=Object(z.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),i=Object(z.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(z.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!1),h=Object(z.a)(v,2),g=h[0],E=h[1],b=Object(n.useState)(""),y=Object(z.a)(b,2),w=y[0],O=y[1];return r.a.createElement(k.a,{noValidate:!0,validated:g,onSubmit:function(t){return function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),E(!0),c(!0),re(s,p).then(function(t){var a=t.data;setTimeout(function(){return c(!1)},1e3),setTimeout(function(){return e.onLoggedIn(a)},1e3)}).catch(function(e){c(!1),console.log(e);var t=e.response.data.message;O(t)})}(t)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmailLogin"},r.a.createElement(k.a.Label,null,"Username"),r.a.createElement(k.a.Control,{type:"username",placeholder:"Enter username",value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please provide a Username."),!Ee(w)&&w.includes("Username")&&r.a.createElement(J,{variant:"danger"},w),r.a.createElement(k.a.Text,{className:"text-muted"},"We'll never share your username/email with anyone else.")),r.a.createElement(k.a.Group,{controlId:"formBasicPasswordLogin"},r.a.createElement(k.a.Label,null,"Password"),r.a.createElement(k.a.Control,{type:"password",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)}}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please provide your password."),!Ee(w)&&w.includes("Password")&&r.a.createElement(J,{variant:"danger"},w)),r.a.createElement(D.a,{variant:s&&p?"outline-primary":"outline-secondary",type:"submit",disabled:!s||!p||o},o?r.a.createElement(W.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})&&"Hold please ...":"Login"))},ye=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"outline-primary",onClick:e.onModalShow},"Login"),r.a.createElement(he,{show:e.modalShow,onHide:e.onModalClose,heading:"Login"},r.a.createElement(be,{onLoggedIn:e.onLoggedIn})))},we=function(e){var t=e.modalShow,a=e.onModalClose,n=e.onModalShow,o=e.onRegister,c=e.onLoggedIn;return r.a.createElement(N.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Welcome to movie.db")),r.a.createElement("p",null,"Hack up furballs rub butt on table stretch, and lick butt. Go into a room to decide you didn't want to be in there anyway put butt in owner's face mesmerizing birds. Hiding behind the couch until lured out by a feathery toy meowing non stop for food. Scratch the box annoy the old grumpy cat, start a fight and then retreat to wash when i lose but nya nya nyan but get scared by sudden appearance of cucumber rub face on everything, so purr when being pet. Sweet beast. Stare at wall turn and meow stare at wall some more meow again continue staring . Sniff other cat's butt and hang jaw half open thereafter go into a room to decide you didn't want to be in there anyway but meow meow mama. Dream about hunting birds meowwww, but stand with legs in litter box, but poop outside."),B.isLoggedIn()?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.c,{to:"/myFlixApp/movies"},r.a.createElement(D.a,{variant:"outline-primary"},"View Movies"))):r.a.createElement(G.a,null,r.a.createElement(ye,{onModalShow:n("login"),modalShow:t.login,onModalClose:a("login"),onLoggedIn:function(e){return c(e)}}),r.a.createElement("div",{className:"mr-2"}),r.a.createElement(ge,{onModalShow:n("register"),modalShow:t.register,onModalClose:a("register"),onRegister:function(e){return o(e)}})))},Oe=a(6),je=a.n(Oe),Se=Object(f.b)(function(e){return{movies:e.movies}})(function(e){var t=e.movies,a=e.history,n=e.match;if(Ee(t))return r.a.createElement("p",null,"loading movie...");var o=t.find(function(e){return e.Director.Name===n.params.name}).Director;return r.a.createElement(je.a,null,r.a.createElement(je.a.Header,{as:"h5"},"Director"),r.a.createElement(je.a.Body,null,r.a.createElement(je.a.Title,null,o.Name),r.a.createElement(je.a.Text,null,o.Bio),r.a.createElement(je.a.Text,null,o.Birth),r.a.createElement(D.a,{variant:"outline-dark",onClick:function(){a.goBack()}},"Back")),r.a.createElement(je.a.Footer,{className:"text-muted"},"2 days ago"))}),ke=Object(f.b)(function(e){return{movies:e.movies}})(function(e){var t=e.movies,a=e.history,n=e.match;if(Ee(t))return r.a.createElement("p",null,"loading movie...");var o=t.find(function(e){return e.Genre.Name===n.params.name}).Genre;return r.a.createElement(je.a,null,r.a.createElement(je.a.Header,{as:"h5"},"Genre"),r.a.createElement(je.a.Body,null,r.a.createElement(je.a.Title,null,o.Name),r.a.createElement(je.a.Text,null,o.Description),r.a.createElement(D.a,{variant:"outline-dark",onClick:function(){a.goBack()}},"Back")),r.a.createElement(je.a.Footer,{className:"text-muted"},"2 days ago"))}),xe=a(78),Ce=a.n(xe),Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1024x300",t=arguments.length>1?arguments[1]:void 0;return"https://source.unsplash.com/random/".concat(e,"?").concat(t)},Ue=Object(f.b)(function(e){return{movies:e.movies}})(function(e){var t=e.movies,a=e.history,n=e.match;if(Ee(t))return r.a.createElement("p",null,"loading movie...");var o,c,l=t.find(function(e){return e._id===n.params.movieId});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,null,r.a.createElement("img",{width:64,height:64,className:"mr-3",src:(o="100",c="000000","https://via.placeholder.com/".concat(o,"/").concat(c)||l.ImagePath),alt:"movie poster placeholder"}),r.a.createElement(Ce.a.Body,null,r.a.createElement("h5",null,l.Title),r.a.createElement("p",null,l.Description))),r.a.createElement(D.a,{variant:"outline-dark",onClick:function(){a.goBack()}},"Back"))}),Fe=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,console.log(t),t},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"w300",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"http://image.tmdb.org/t/p/".concat(e).concat(t)},Be=a(51),Ie=a(124),Ae=a.n(Ie),Me=a(125),Pe=a.n(Me),Re=(a(208),function(e){var t=e.placement,a=e.tooltipText,n=e.children;return r.a.createElement(Ae.a,{key:t,placement:t,overlay:r.a.createElement(Pe.a,{className:"bs-tooltip-custom",id:"tooltip-".concat(t)},a)},n)}),Ne=function(e){var t=e.movie,a=e.currentUser,o=Object(n.useState)(!1),c=Object(z.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(""),m=Object(z.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(""),v=Object(z.a)(f,2),h=v[0],g=v[1];Object(n.useEffect)(function(){var e;return(e=t.Title,$.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat("da2b59e2e188a60999fe883034e40843","&language=en-US&query=").concat(e,"&page=1&include_adult=false"))).then(Fe).then(function(e){var t=e.data.results[0];p(Le("w400",t.poster_path)),g(t.vote_average)}),function(){}},[t.Title]);return r.a.createElement(je.a,{border:"info"},r.a.createElement(je.a.Img,{style:d?null:_e.imgPlaceholder,variant:"top",src:d}),r.a.createElement(je.a.Header,{as:"h4"},t.Title," ",r.a.createElement("sup",null,"[",h,"]")),r.a.createElement(je.a.Body,null,r.a.createElement(l.b,{to:"/myFlixApp/directors/".concat(t.Director.Name)},r.a.createElement(je.a.Text,{style:{marginBottom:"5%"}},t.Director.Name)),r.a.createElement(je.a.Text,{style:{marginBottom:"0"}},t.Description),r.a.createElement(l.b,{to:"/myFlixApp/genres/".concat(t.Genre.Name)},r.a.createElement(je.a.Text,{style:{marginBottom:"5%"}},r.a.createElement("small",{className:"text-muted"},"#",t.Genre.Name))),r.a.createElement(l.b,{to:"/myFlixApp/movies/".concat(t._id)},r.a.createElement(D.a,{variant:"outline-dark"},"Read more")),a.FavoriteMovies.find(function(e){return e===t._id})?r.a.createElement(Re,{placement:"right",tooltipText:"Remove from favorites"},r.a.createElement(D.a,{variant:"outline-danger",className:"ml-1",onClick:function(){return e=a.Username,n=t._id,s(!0),void le(e,n).then(Fe).then(function(e){console.log("removed from fav",e),s(!1)}).catch(function(e){s(!1),console.error("onAddToFavorite",e)});var e,n}},i?r.a.createElement(W.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):r.a.createElement(Be.c,{icon:Be.b,size:"small",verticalAlign:"middle"}))):r.a.createElement(Re,{placement:"bottom",tooltipText:"Add to favorites"},r.a.createElement(D.a,{variant:"outline-info",className:"ml-1",onClick:function(){return e=a.Username,n=t._id,s(!0),void ce(e,n).then(Fe).then(function(e){console.log("added to fav",e),s(!1)}).catch(function(e){s(!1),console.error("onAddToFavorite",e)});var e,n}},i?r.a.createElement(W.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):r.a.createElement(Be.c,{icon:Be.a,size:"small",verticalAlign:"middle"})))),r.a.createElement(je.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Released: ",t.ReleaseYear)))},_e={imgPlaceholder:{backgroundColor:"black",width:"100%",height:"300px"}},De=a(58),He=a.n(De),Ge=a(73),ze=a.n(Ge),Ve=a(59),We=a.n(Ve),qe=a(57),Ye=a.n(qe),Je=a(126),Ke=a.n(Je),$e={setSortColumn:function(e){return{type:"SET_SORT_COLUMN",value:e}}},Qe=["Title","Description","Director","Genre","ReleaseYear"],Xe=Object(f.b)(null,$e)(function(e){return r.a.createElement(Ke.a,{drop:"left",alignRight:!1,size:"sm",variant:"outline-secondary",className:"mb-1",id:"dropdown-item-button",title:"Sort by",onSelect:function(t){return e.setSortColumn(t)},style:{textAlign:"right"}},Qe.map(function(e){return r.a.createElement(Ye.a.Item,{key:e,eventKey:e,as:"button"},e)}))}),Ze=Object(f.b)(function(e){var t=e.user,a=e.movies,n=e.visibilityFilter,r=e.sortColumn,o=a.concat().sort(function(e,t){return e[r]<t[r]?-1:e[r]>t[r]?1:0});""!==n&&(o=o.filter(function(e){return"object"===typeof e[r]?(t=e[r],Object.entries(t)[0][1]).toLowerCase().includes(n):e[r].includes(n)||e[r].toLowerCase().includes(n);var t}));return{movies:o,currentUser:t}})(function(e){var t=e.movies,a=e.currentUser,n=e.match;if(!t)return r.a.createElement("p",null,"loading...");return r.a.createElement(He.a,null,r.a.createElement(ze.a,null,r.a.createElement(Xe,null),r.a.createElement(We.a,null,t.map(function(e){return r.a.createElement(Ne,{currentUser:a,movie:e,key:e._id,match:n})}))))}),et=a(127),tt=a.n(et),at=a(49),nt=a.n(at),rt=(a(211),function(e){var t=e.movieId,a=e.token,o=Object(n.useState)(""),c=Object(z.a)(o,2),i=c[0],s=c[1];return Object(n.useEffect)(function(){return de(t,a).then(function(e){s(e)}),function(){}},[t,a]),Ee(i)?"Loading...":r.a.createElement(je.a,{border:"dark",key:i._id},r.a.createElement(je.a.Header,{as:"h5"},i.Title),r.a.createElement(je.a.Body,null,r.a.createElement(l.c,{to:"/myFlixApp/directors/".concat(i.Director.Name)},r.a.createElement(je.a.Text,{style:{marginBottom:"5%"}},i.Director.Name)),r.a.createElement(je.a.Text,{style:{marginBottom:"0"}},i.Description),r.a.createElement(l.c,{to:"/myFlixApp/genres/".concat(i.Genre.Name)},r.a.createElement(je.a.Text,{style:{marginBottom:"5%"}},r.a.createElement("small",{className:"text-muted"},"#",i.Genre.Name))),r.a.createElement(l.c,{to:"/myFlixApp/movies/".concat(i._id)},r.a.createElement(D.a,{variant:"outline-dark"},"Read more"))),r.a.createElement(je.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Released: ",i.ReleaseYear)))}),ot={setUser:v},ct=Object(f.b)(function(e){return{user:e.user}},ot)(function(e){console.log("UpdateUserView",e);var t=Object(n.useState)(!1),a=Object(z.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(e.user.Username),i=Object(z.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(e.user.Email),d=Object(z.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(e.user.Password),h=Object(z.a)(v,2),g=h[0],E=h[1],b=Object(n.useState)(""),y=Object(z.a)(b,2),w=y[0],O=y[1],j=Object(n.useState)(e.user.Birthday?e.user.Birthday.slice(0,-14):""),S=Object(z.a)(j,2),x=S[0],C=S[1],T=Object(n.useState)(!1),U=Object(z.a)(T,2),F=U[0],L=U[1],I=Object(n.useState)(""),A=Object(z.a)(I,2),M=A[0],P=A[1],R=Object(n.useState)(""),N=Object(z.a)(R,2),_=N[0],H=N[1],G=Object(n.useState)(""),V=Object(z.a)(G,2),q=V[0],Y=V[1];return Ee(e.user)?"Loading":r.a.createElement(k.a,{noValidate:!0,validated:F,onSubmit:function(t){return function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),L(!0),c(!0),se(e.user._id,s,p,x,g).then(function(t){if(console.log("TCL: response",t),200===t){setTimeout(function(){return c(!1)},1e3),Y(""),P(""),H("\ud83c\udf89 Hey ".concat(s,", you updated successfully."));var a=B.token;B.setTokenAndUsername(a,s);var n=oe(s,a);console.log("TCL: getCurrentUser",n),n.then(function(t){console.log("TCL: response getCurrentUser",t),e.setUser(t)}).finally(function(){return setTimeout(function(){return e.onUpdate()},5e3)})}}).catch(function(e){var t=e.response.data.errors[0],a=t.msg,n=t.param,r=t.value;t&&(c(!1),Y(n),P("\n            ".concat(a,"\n            [").concat(n,": ").concat(r,"]\n          "))),console.log("Error",t)})}(t)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmailRegister"},r.a.createElement(k.a.Label,null,"Email address"),r.a.createElement(k.a.Control,{type:"email",placeholder:"Enter email",value:p,onChange:function(e){return f(e.target.value)},isInvalid:"Email"===q,style:{borderColor:"Email"===q&&"#dc3545"},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please use an email."),r.a.createElement(k.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(k.a.Group,{controlId:"formBasicUsernameRegister"},r.a.createElement(k.a.Label,null,"Username"),r.a.createElement(k.a.Control,{type:"username",placeholder:"Enter username",value:s,onChange:function(e){return u(e.target.value)},isInvalid:"Username"===q,style:{borderColor:"Username"===q&&"#dc3545"},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please choose a username.")),r.a.createElement(k.a.Group,{controlId:"formBasicBirthdayRegister"},r.a.createElement(k.a.Label,null,"Birthday"),r.a.createElement(k.a.Control,{type:"date",value:x,onChange:function(e){return C(e.target.value)}})),r.a.createElement(k.a.Group,{controlId:"formBasicPasswordRegister"},r.a.createElement(k.a.Label,null,"Password"),r.a.createElement(k.a.Control,{type:"password",placeholder:"Enter Password",value:g,onChange:function(e){return E(e.target.value)},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please provide a password.")),r.a.createElement(k.a.Group,{controlId:"formBasicConfirmPasswordRegister"},r.a.createElement(k.a.Label,null,"Confirm Password"),r.a.createElement(k.a.Control,{type:"password",placeholder:"Confirm Password",value:w,onChange:function(e){return O(e.target.value)},required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Please confirm password."),g!==w&&r.a.createElement(J,{variant:"warning"},"Confirm password and password do not match.")),r.a.createElement(D.a,{variant:s&&p&&g?"outline-primary":"outline-secondary",type:"submit",disabled:!s||!p||!g.includes(w)||g!==w||_||o},o?r.a.createElement(W.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})&&"Hold please ...":"Update"),M&&r.a.createElement(J,{variant:"danger"},M),_&&r.a.createElement(J,{variant:"success"},_))}),lt=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{variant:"outline-dark",onClick:e.onModalShow},"Update Profile"),r.a.createElement(he,{show:e.modalShow,onHide:e.onModalClose,heading:"Update Profile"},r.a.createElement(ct,{onUpdate:e.onUpdate,onHide:e.onModalClose})))},it=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modalShow:{updateProfile:!1}},a.onModalClose=function(e){return function(){"updateProfile"===e&&a.setState({modalShow:{updateProfile:!1}})}},a.onModalShow=function(e){return function(){"updateProfile"===e&&a.setState({modalShow:{updateProfile:!0}})}},a.onUpdate=function(){setTimeout(a.onModalClose("updateProfile"),0)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onHandleUserDelete",value:function(e){ue(e).then(function(e){console.log(e),B.removeTokenAndUsername()}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;if(Ee(this.props.user)||null===this.props.user||Ee(this.props.token)||Ee(this.props.users))return"Loading user profile...";var t=this.props,a=t.user,n=t.users,o=t.token,c=t.match,l=a._id===c.params.id?a:n.find(function(e){return e._id===c.params.id}),i=l.Username,s=l.Email,u=l.FavoriteMovies;return r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(je.a.Img,{variant:"top",src:Te("1024x300","nature")}),r.a.createElement(je.a.Body,null,r.a.createElement(je.a.Title,null,i),r.a.createElement(je.a.Text,null,s)),r.a.createElement(tt.a,{className:"list-group-flush"},r.a.createElement(nt.a,null,"Cras justo odio"),r.a.createElement(nt.a,null,"Dapibus ac facilisis in"),r.a.createElement(nt.a,null,"Vestibulum at eros")),r.a.createElement(je.a.Body,{style:st.updateAccountBtnWrapper},r.a.createElement(lt,{onModalShow:this.onModalShow("updateProfile"),modalShow:this.state.modalShow.updateProfile,onModalClose:this.onModalClose("updateProfile"),onUpdate:this.onUpdate})),r.a.createElement(je.a.Body,{style:st.deleteAccountBtnWrapper},r.a.createElement(D.a,{variant:"danger",onClick:function(){return e.onHandleUserDelete(i)}},"Delete Account"))),r.a.createElement("hr",null),Ee(u)?r.a.createElement("h2",null," Add some favorite movies"):r.a.createElement("h2",null," Favorite movies: "),r.a.createElement(We.a,null,!Ee(u)&&u.map(function(e){return r.a.createElement(rt,{movieId:e,token:o,key:e})})))}}]),t}(n.Component),st={updateAccountBtnWrapper:{textAlign:"left"},deleteAccountBtnWrapper:{textAlign:"right"}},ut=Object(f.b)(function(e){return{user:e.user,users:e.users,token:B.token}})(it),mt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(!this.props.users)return"Loading users...";var e=this.props.users;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Users list route"),e.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("ul",null,r.a.createElement("li",null,e.Username),r.a.createElement("li",null,e.Email)))}))}}]),t}(n.Component),dt=Object(f.b)(function(e){return{users:e.users}})(mt),pt=(a(212),a(129)),ft=function(e){var t=e.component,a=Object(pt.a)(e,["component"]);return r.a.createElement(g.b,Object.assign({},a,{render:function(e){return B.isLoggedIn()?r.a.createElement(t,e):r.a.createElement(g.a,{to:{pathname:"/myFlixApp",state:{from:e.location}}})}}))},vt={setMovies:function(e){return{type:"SET_MOVIES",value:e}},setUser:v,setUsers:function(e){return{type:"SET_USERS",value:e}}},ht=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedMovie:null,modalShow:{login:!1,register:!1},toastMessage:{type:"",show:!1}},a.onLoggedIn=function(e){var t=e.token,n=e.user.Username;B.setTokenAndUsername(t,n),a.props.setUser(e.user),a.setState({toastMessage:{type:"success",show:!0}},function(){a.getMoviesList(),a.getUsersList(),setTimeout(function(){return a.setState({toastMessage:{show:!1}})},3e3)})},a.onRegister=function(){setTimeout(a.onModalClose("register"),0),setTimeout(a.onModalShow("login"),0)},a.onModalClose=function(e){return function(){"login"===e&&a.setState({modalShow:{login:!1}}),"register"===e&&a.setState({modalShow:{register:!1}})}},a.onModalShow=function(e){return function(){"login"===e&&a.setState({modalShow:{login:!0}}),"register"===e&&a.setState({modalShow:{register:!0}})}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===B.token){e.next=9;break}return e.next=5,this.getCurrentUser();case 5:return e.next=7,this.getMoviesList();case 7:return e.next=9,this.getUsersList();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("componentDidMount",e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(P.a)(M.a.mark(function e(){var t,a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.token,a=B.username,e.next=3,oe(a,t);case 3:n=e.sent,this.props.setUser(n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMoviesList",value:function(){var e=Object(P.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.token,e.next=3,me(t);case 3:a=e.sent,this.props.setMovies(a);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUsersList",value:function(){var e=Object(P.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.token,e.next=3,ie(t);case 3:a=e.sent,this.props.setUsers(a);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.modalShow,n=t.toastMessage;return r.a.createElement("div",{className:"main-view"},r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/myFlixApp/",render:function(){return r.a.createElement(we,{modalShow:a,onModalClose:e.onModalClose,onModalShow:e.onModalShow,onRegister:e.onRegister,onLoggedIn:e.onLoggedIn})}}),r.a.createElement(ft,{path:"/myFlixApp/movies",component:Ze,exact:!0}),r.a.createElement(ft,{path:"/myFlixApp/movies/:movieId",component:Ue,exact:!0}),r.a.createElement(ft,{path:"/myFlixApp/directors/:name",component:Se,exact:!0}),r.a.createElement(ft,{exact:!0,path:"/myFlixApp/genres/:name",component:ke}),r.a.createElement(ft,{path:"/myFlixApp/users",component:dt}),r.a.createElement(ft,{path:"/myFlixApp/profile/:id",component:ut}),r.a.createElement(g.b,{render:function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"Error! No matches for ",r.a.createElement("code",null,t.pathname)))}}),r.a.createElement(He.a,null,n.show&&r.a.createElement(J,{position:"absolute",variant:n.type},"success"===n.type&&"Success!"))))}}]),t}(n.Component),gt=Object(g.f)(Object(f.b)(null,vt)(ht)),Et=a(128),bt=a.n(Et),yt=function(e){return r.a.createElement("div",null,"Footer bro"," ",r.a.createElement("span",{"aria-label":"emoji",role:"img"},"\ud83c\udf7f"))},wt=(a(213),Object(p.c)(h)),Ot=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{store:wt},r.a.createElement(bt.a,null,r.a.createElement(I,null),r.a.createElement(g.b,{exact:!0,path:"/",render:function(){return r.a.createElement(g.a,{to:"/myFlixApp"})}}),r.a.createElement(gt,null),r.a.createElement(yt,null)))}}]),t}(n.Component);a(214),a(215),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,null,r.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[130,1,2]]]);
//# sourceMappingURL=main.e1abd5ef.chunk.js.map