(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){e.exports=a(215)},192:function(e,t,a){},202:function(e,t,a){},205:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),l=a(29),i=a(30),s=a(32),u=a(31),m=a(33),d=a(41),p=a(28),v=Object(d.b)({asyncLoadingStarted:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_START":return t.value;default:return e}},asyncLoadingFinished:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_FINISH":return t.value;default:return e}},asyncLoadingError:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_ERROR":return t.value;default:return e}},visibilityFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return t.value;default:return e}},sortColumn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Title",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_COLUMN":return t.value;default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MOVIES":return t.value;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.value;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return t.value;default:return e}}}),h=a(10),f=a.n(h),g=a(19),E=a(18),b=a(36),y=a(120),w=a.n(y),S=a(11),k=a.n(S),O=a(121),j=a.n(O),x=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},C=a(13),T=a(8),I=a.n(T),L=a(35),U=a.n(L),B=a(74),N=a.n(B),M=function(e){var t=e.position,a=e.variant,n=e.children;return"absolute"===t?r.a.createElement(N.a,{style:{position:"absolute",bottom:0,right:0},variant:a},n):r.a.createElement(N.a,{variant:a},n)},F=a(23),R=a.n(F),D="https://my-flix-db-11209.herokuapp.com/login",_="https://my-flix-db-11209.herokuapp.com/user",A="https://my-flix-db-11209.herokuapp.com/movies",P="https://my-flix-db-11209.herokuapp.com/users",H=function(){var e=Object(g.a)(f.a.mark(function e(t,a,n,r){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post(_,{Username:t,Password:a,Email:n,Birthday:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),G=function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post(D,{Username:t,Password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(_,"/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var e=Object(g.a)(f.a.mark(function e(t,a){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:return n=e.sent,e.next=5,R.a.post("".concat(_,"/").concat(t,"/FavoriteMovies/").concat(a),null,{headers:{Authorization:"Bearer ".concat(n)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(g.a)(f.a.mark(function e(t,a){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:return n=e.sent,e.next=5,R.a.delete("".concat(_,"/").concat(t,"/FavoriteMovies/").concat(a),{headers:{Authorization:"Bearer ".concat(n)}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get(P,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.delete("".concat(_,"/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get(A,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(A,"/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),$=function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),i=Object(C.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(C.a)(m,2),p=d[0],v=d[1],h=Object(n.useState)(""),f=Object(C.a)(h,2),g=f[0],E=f[1],b=Object(n.useState)(""),y=Object(C.a)(b,2),w=y[0],S=y[1],O=Object(n.useState)(""),j=Object(C.a)(O,2),x=j[0],T=j[1],L=Object(n.useState)(!1),B=Object(C.a)(L,2),N=B[0],F=B[1],R=Object(n.useState)(""),D=Object(C.a)(R,2),_=D[0],A=D[1],P=Object(n.useState)(""),G=Object(C.a)(P,2),z=G[0],V=G[1],W=Object(n.useState)(""),q=Object(C.a)(W,2),Y=q[0],J=q[1];return r.a.createElement(I.a,{noValidate:!0,validated:N,onSubmit:function(t){return function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),F(!0),c(!0),H(s,w,p,g).then(function(t){if("Created"===t.statusText){setTimeout(function(){return c(!1)},1e3),J(""),A("");var a=t.data;V("\ud83c\udf89 Hey ".concat(a.Username,", you registered successfully, please login!")),setTimeout(function(){return e.onRegister()},5e3)}}).catch(function(e){var t=e.response.data.errors[0],a=t.msg,n=t.param,r=t.value;t&&(c(!1),J(n),A("\n            ".concat(a,"\n            [").concat(n,": ").concat(r,"]\n          "))),console.log("Error",t)})}(t)}},r.a.createElement(I.a.Group,{controlId:"formBasicEmailRegister"},r.a.createElement(I.a.Label,null,"Email address"),r.a.createElement(I.a.Control,{type:"email",placeholder:"Enter email",value:p,onChange:function(e){return v(e.target.value)},isInvalid:"Email"===Y,style:{borderColor:"Email"===Y&&"#dc3545"},required:!0}),r.a.createElement(I.a.Control.Feedback,{type:"invalid"},"Please use an email."),r.a.createElement(I.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(I.a.Group,{controlId:"formBasicUsernameRegister"},r.a.createElement(I.a.Label,null,"Username"),r.a.createElement(I.a.Control,{type:"username",placeholder:"Enter username",value:s,onChange:function(e){return u(e.target.value)},isInvalid:"Username"===Y,style:{borderColor:"Username"===Y&&"#dc3545"},required:!0}),r.a.createElement(I.a.Control.Feedback,{type:"invalid"},"Please choose a username.")),r.a.createElement(I.a.Group,{controlId:"formBasicBirthdayRegister"},r.a.createElement(I.a.Label,null,"Birthday"),r.a.createElement(I.a.Control,{type:"date",value:g,onChange:function(e){return E(e.target.value)}})),r.a.createElement(I.a.Group,{controlId:"formBasicPasswordRegister"},r.a.createElement(I.a.Label,null,"Password"),r.a.createElement(I.a.Control,{type:"password",placeholder:"Enter Password",value:w,onChange:function(e){return S(e.target.value)},required:!0}),r.a.createElement(I.a.Control.Feedback,{type:"invalid"},"Please provide a password.")),r.a.createElement(I.a.Group,{controlId:"formBasicConfirmPasswordRegister"},r.a.createElement(I.a.Label,null,"Confirm Password"),r.a.createElement(I.a.Control,{type:"password",placeholder:"Confirm Password",value:x,onChange:function(e){return T(e.target.value)},required:!0}),r.a.createElement(I.a.Control.Feedback,{type:"invalid"},"Please confirm password."),w!==x&&r.a.createElement(M,{variant:"warning"},"Confirm password and password do not match.")),r.a.createElement(k.a,{variant:s&&p&&w?"outline-primary":"outline-secondary",type:"submit",disabled:!s||!p||!w.includes(x)||w!==x||z||o},o?r.a.createElement(U.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})&&"Hold please ...":"Register"),_&&r.a.createElement(M,{variant:"danger"},_),z&&r.a.createElement(M,{variant:"success"},z))},Q=a(42),X=a.n(Q),Z=function(e){return r.a.createElement(X.a,{show:e.show,onHide:e.onHide,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(X.a.Header,{closeButton:!0},r.a.createElement(X.a.Title,{id:"contained-modal-title-vcenter"},e.heading)),r.a.createElement(X.a.Body,null,e.children),r.a.createElement(X.a.Footer,null,r.a.createElement(k.a,{variant:"outline-danger",onClick:e.onHide},"Close")))},ee=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"outline-dark",onClick:e.onModalShow},"Register"),r.a.createElement(Z,{show:e.modalShow,onHide:e.onModalClose,heading:"Registration"},r.a.createElement($,{onRegister:e.onRegister,onHide:e.onModalClose})))},te=function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),i=Object(C.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(C.a)(m,2),p=d[0],v=d[1],h=Object(n.useState)(!1),f=Object(C.a)(h,2),g=f[0],E=f[1],b=Object(n.useState)(""),y=Object(C.a)(b,2),w=y[0],S=y[1];return r.a.createElement(I.a,{noValidate:!0,validated:g,onSubmit:function(t){return function(t){t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),E(!0),c(!0),G(s,p).then(function(t){var a=t.data;setTimeout(function(){return c(!1)},1e3),setTimeout(function(){return e.onLoggedIn(a)},1e3)}).catch(function(e){c(!1),console.log(e.response);var t=e.response.data.message;S(t)})}(t)}},r.a.createElement(I.a.Group,{controlId:"formBasicEmailLogin"},r.a.createElement(I.a.Label,null,"Username"),r.a.createElement(I.a.Control,{type:"username",placeholder:"Enter username",value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement(I.a.Control.Feedback,{type:"invalid"},"Please provide a Username."),!x(w)&&w.includes("Username")&&r.a.createElement(M,{variant:"danger"},w),r.a.createElement(I.a.Text,{className:"text-muted"},"We'll never share your username/email with anyone else.")),r.a.createElement(I.a.Group,{controlId:"formBasicPasswordLogin"},r.a.createElement(I.a.Label,null,"Password"),r.a.createElement(I.a.Control,{type:"password",placeholder:"Password",value:p,onChange:function(e){return v(e.target.value)}}),r.a.createElement(I.a.Control.Feedback,{type:"invalid"},"Please provide your password."),!x(w)&&w.includes("Password")&&r.a.createElement(M,{variant:"danger"},w)),r.a.createElement(k.a,{variant:s&&p?"outline-primary":"outline-secondary",type:"submit",disabled:!s||!p||o},o?r.a.createElement(U.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})&&"Hold please ...":"Login"))},ae=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"outline-primary",onClick:e.onModalShow},"Login"),r.a.createElement(Z,{show:e.modalShow,onHide:e.onModalClose,heading:"Login"},r.a.createElement(te,{onLoggedIn:e.onLoggedIn})))},ne=function(e){var t=e.user,a=e.modalShow,n=e.onModalClose,o=e.onModalShow,c=e.onRegister,l=e.onLoggedIn;return r.a.createElement(w.a,null,r.a.createElement("h1",null,"Welcome to movie.db"),r.a.createElement("p",null,"Hack up furballs rub butt on table stretch, and lick butt. Go into a room to decide you didn't want to be in there anyway put butt in owner's face mesmerizing birds. Hiding behind the couch until lured out by a feathery toy meowing non stop for food. Scratch the box annoy the old grumpy cat, start a fight and then retreat to wash when i lose but nya nya nyan but get scared by sudden appearance of cucumber rub face on everything, so purr when being pet. Sweet beast. Stare at wall turn and meow stare at wall some more meow again continue staring . Sniff other cat's butt and hang jaw half open thereafter go into a room to decide you didn't want to be in there anyway but meow meow mama. Dream about hunting birds meowwww, but stand with legs in litter box, but poop outside."),x(t)?r.a.createElement(j.a,null,r.a.createElement(ae,{onModalShow:o("login"),modalShow:a.login,onModalClose:n("login"),onLoggedIn:function(e){return l(e)}}),r.a.createElement("div",{className:"mr-2"}),r.a.createElement(ee,{onModalShow:o("register"),modalShow:a.register,onModalClose:n("register"),onRegister:function(e){return c(e)}})):r.a.createElement(E.b,{to:"/movies"},r.a.createElement(k.a,{variant:"outline-primary"},"View Movies")))},re=a(6),oe=a.n(re),ce=function(e){var t=e.movie.Director;return r.a.createElement(oe.a,null,r.a.createElement(oe.a.Header,{as:"h5"},"Director"),r.a.createElement(oe.a.Body,null,r.a.createElement(oe.a.Title,null,t.Name),r.a.createElement(oe.a.Text,null,t.Bio),r.a.createElement(oe.a.Text,null,t.Birth),r.a.createElement(k.a,{variant:"outline-dark",onClick:function(){window.history.back()}},"Back")),r.a.createElement(oe.a.Footer,{className:"text-muted"},"2 days ago"))},le=function(e){var t=e.movie.Genre;return r.a.createElement(oe.a,null,r.a.createElement(oe.a.Header,{as:"h5"},"Genre"),r.a.createElement(oe.a.Body,null,r.a.createElement(oe.a.Title,null,t.Name),r.a.createElement(oe.a.Text,null,t.Description),r.a.createElement(k.a,{variant:"outline-dark",onClick:function(){window.history.back()}},"Back")),r.a.createElement(oe.a.Footer,{className:"text-muted"},"2 days ago"))},ie=a(76),se=a.n(ie),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1024x300",t=arguments.length>1?arguments[1]:void 0;return"https://source.unsplash.com/random/".concat(e,"?").concat(t)},me=function(e){var t=e.movie;if(x(t))return r.a.createElement("p",null,"loading movie...");var a,n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,null,r.a.createElement("img",{width:64,height:64,className:"mr-3",src:(a="100",n="000000","https://via.placeholder.com/".concat(a,"/").concat(n)||t.ImagePath),alt:"movie poster placeholder"}),r.a.createElement(se.a.Body,null,r.a.createElement("h5",null,t.Title),r.a.createElement("p",null,t.Description))),r.a.createElement(k.a,{variant:"outline-dark",onClick:function(){window.history.back()}},"Back"))},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"w300",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"http://image.tmdb.org/t/p/".concat(e).concat(t)},pe=a(50),ve=a(123),he=a.n(ve),fe=a(125),ge=a.n(fe),Ee=(a(192),function(e){var t=e.placement,a=e.tooltipText,n=e.children;return r.a.createElement(he.a,{key:t,placement:t,overlay:r.a.createElement(ge.a,{className:"bs-tooltip-custom",id:"tooltip-".concat(t)},a)},n)}),be=function(e){var t=e.movie,a=e.currentUser,o=Object(n.useState)(!1),c=Object(C.a)(o,2),l=c[0],i=c[1],s=Object(n.useState)(""),u=Object(C.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(""),v=Object(C.a)(p,2),h=v[0],f=v[1];Object(n.useEffect)(function(){var e;return(e=t.Title,R.a.get("https://api.themoviedb.org/3/search/movie?api_key=".concat("da2b59e2e188a60999fe883034e40843","&language=en-US&query=").concat(e,"&page=1&include_adult=false"))).then(function(e){if(200===e.status){var t=e.data.results[0];d(de("w400",t.poster_path)),f(t.vote_average)}}),function(){}},[t.Title]);return r.a.createElement(oe.a,{border:"info"},r.a.createElement(oe.a.Img,{style:m?null:ye.imgPlaceholder,variant:"top",src:m}),r.a.createElement(oe.a.Header,{as:"h4"},t.Title," ",r.a.createElement("sup",null,"[",h,"]")),r.a.createElement(oe.a.Body,null,r.a.createElement(E.b,{to:"/directors/".concat(t.Director.Name)},r.a.createElement(oe.a.Text,{style:{marginBottom:"5%"}},t.Director.Name)),r.a.createElement(oe.a.Text,{style:{marginBottom:"0"}},t.Description),r.a.createElement(E.b,{to:"/genres/".concat(t.Genre.Name)},r.a.createElement(oe.a.Text,{style:{marginBottom:"5%"}},r.a.createElement("small",{className:"text-muted"},"#",t.Genre.Name))),r.a.createElement(E.b,{to:"/movies/".concat(t._id)},r.a.createElement(k.a,{variant:"outline-dark"},"Read more")),a.FavoriteMovies.find(function(e){return e===t._id})?r.a.createElement(Ee,{placement:"right",tooltipText:"Remove from favorites"},r.a.createElement(k.a,{variant:"outline-danger",className:"ml-1",onClick:function(){return e=a.Username,n=t._id,i(!0),void W(e,n).then(function(e){200===e.status&&i(!1)}).catch(function(e){i(!1),console.error("onAddToFavorite",e)});var e,n}},l?r.a.createElement(U.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):r.a.createElement(pe.c,{icon:pe.b,size:"small",verticalAlign:"middle"}))):r.a.createElement(Ee,{placement:"bottom",tooltipText:"Add to favorites"},r.a.createElement(k.a,{variant:"outline-info",className:"ml-1",onClick:function(){return e=a.Username,n=t._id,i(!0),void V(e,n).then(function(e){200===e.status&&i(!1)}).catch(function(e){i(!1),console.error("onAddToFavorite",e)});var e,n}},l?r.a.createElement(U.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}):r.a.createElement(pe.c,{icon:pe.a,size:"small",verticalAlign:"middle"})))),r.a.createElement(oe.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Released: ",t.ReleaseYear)))},ye={imgPlaceholder:{backgroundColor:"black",width:"100%",height:"300px"}},we=a(58),Se=a.n(we),ke=a(72),Oe=a.n(ke),je=a(59),xe=a.n(je),Ce=a(57),Te=a.n(Ce),Ie=a(126),Le=a.n(Ie),Ue={setSortColumn:function(e){return{type:"SET_SORT_COLUMN",value:e}}},Be=["Title","Description","Director","Genre","ReleaseYear"],Ne=Object(p.b)(null,Ue)(function(e){return r.a.createElement(Le.a,{drop:"left",alignRight:!1,size:"sm",variant:"outline-secondary",className:"mb-1",id:"dropdown-item-button",title:"Sort by",onSelect:function(t){return e.setSortColumn(t)},style:{textAlign:"right"}},Be.map(function(e){return r.a.createElement(Te.a.Item,{key:e,eventKey:e,as:"button"},e)}))}),Me=Object(p.b)(function(e){var t=e.user,a=e.movies,n=e.visibilityFilter,r=e.sortColumn,o=a.concat().sort(function(e,t){return e[r]<t[r]?-1:e[r]>t[r]?1:0});return""!==n&&(o=o.filter(function(e){return"object"===typeof e[r]?(t=e[r],Object.entries(t)[0][1]).toLowerCase().includes(n):e[r].includes(n)||e[r].toLowerCase().includes(n);var t})),{movies:o,currentUser:t}})(function(e){var t=e.movies,a=e.currentUser;return t?r.a.createElement(Se.a,null,r.a.createElement(Oe.a,null,r.a.createElement(Ne,null),r.a.createElement(xe.a,null,t.map(function(e){return r.a.createElement(be,{currentUser:a,movie:e,key:e._id})})))):r.a.createElement("p",null,"loading...")}),Fe=a(127),Re=a.n(Fe),De=a(49),_e=a.n(De),Ae=(a(202),function(e){var t=e.movieId,a=e.token,o=Object(n.useState)(""),c=Object(C.a)(o,2),l=c[0],i=c[1];return Object(n.useEffect)(function(){return K(t,a).then(function(e){i(e.data)}),function(){}},[t,a]),x(l)?"Loading...":r.a.createElement(oe.a,{border:"dark",key:l._id},r.a.createElement(oe.a.Header,{as:"h5"},l.Title),r.a.createElement(oe.a.Body,null,r.a.createElement(E.b,{to:"/directors/".concat(l.Director.Name)},r.a.createElement(oe.a.Text,{style:{marginBottom:"5%"}},l.Director.Name)),r.a.createElement(oe.a.Text,{style:{marginBottom:"0"}},l.Description),r.a.createElement(E.b,{to:"/genres/".concat(l.Genre.Name)},r.a.createElement(oe.a.Text,{style:{marginBottom:"5%"}},r.a.createElement("small",{className:"text-muted"},"#",l.Genre.Name))),r.a.createElement(E.b,{to:"/movies/".concat(l._id)},r.a.createElement(k.a,{variant:"outline-dark"},"Read more"))),r.a.createElement(oe.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Released: ",l.ReleaseYear)))}),Pe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onHandleUserDelete",value:function(e){Y(e).then(function(e){console.log(e),localStorage.removeItem("token"),localStorage.removeItem("user")}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;if(x(this.props.user)||x(this.props.token))return"Loading user profile...";var t=this.props.user,a=t.Username,n=t.Email,o=t.FavoriteMovies;return r.a.createElement("div",null,r.a.createElement(oe.a,null,r.a.createElement(oe.a.Img,{variant:"top",src:ue("1024x300","nature")}),r.a.createElement(oe.a.Body,null,r.a.createElement(oe.a.Title,null,a),r.a.createElement(oe.a.Text,null,n)),r.a.createElement(Re.a,{className:"list-group-flush"},r.a.createElement(_e.a,null,"Cras justo odio"),r.a.createElement(_e.a,null,"Dapibus ac facilisis in"),r.a.createElement(_e.a,null,"Vestibulum at eros")),r.a.createElement(oe.a.Body,{style:He.deleteAccountBtnWrapper},r.a.createElement(k.a,{variant:"danger",onClick:function(){return e.onHandleUserDelete(a)}},"Delete Account"))),r.a.createElement(xe.a,null,x(o)?r.a.createElement("h2",null,"Favorites list."):o.map(function(t){return r.a.createElement(Ae,{movieId:t,token:e.props.token,key:t})})))}}]),t}(n.Component),He={deleteAccountBtnWrapper:{textAlign:"right"}},Ge=Pe,ze=a(78),Ve=a.n(ze),We=a(51),qe=a.n(We),Ye=a(37),Je=a.n(Ye),Ke=a(71),$e=a.n(Ke),Qe={setFilter:function(e){return{type:"SET_FILTER",value:e}}},Xe=Object(p.b)(function(e){return{visibilityFilter:e.visibilityFilter,sortColumn:e.sortColumn}},Qe)(function(e){return r.a.createElement(I.a,{inline:!0},r.a.createElement($e.a,{onChange:function(t){return e.setFilter(t.target.value)},value:e.visibilityFilter,type:"text",placeholder:"Search by ".concat(e.sortColumn),className:"mr-sm-2"}))}),Ze=(a(205),function(e){var t=e.user,a=e.onLoggedOut;return r.a.createElement(qe.a,{collapseOnSelect:!0,expand:"lg",bg:"007bff-outline",variant:"light",sticky:"top"},r.a.createElement(qe.a.Brand,null,r.a.createElement(E.b,{to:"/myFlixApp"},"Home")),r.a.createElement(qe.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(qe.a.Collapse,{id:"responsive-navbar-nav"},!x(t)&&r.a.createElement(Ve.a,{className:"mr-auto"},r.a.createElement(Ve.a.Link,{as:E.c,to:"/users",exact:!0},"People"),r.a.createElement(Je.a,{title:"\ud83d\udc64 ".concat(t.Username),id:"collasible-nav-dropdown"},r.a.createElement(Je.a.Item,{as:E.c,to:"/profile/".concat(t.Username),exact:!0},"Profile"),r.a.createElement(Je.a.Item,{href:"#action/3.2"},"Favorites"),r.a.createElement(Je.a.Item,{href:"#action/3.3"},"Settings"),r.a.createElement(Je.a.Divider,null),!x(t)&&r.a.createElement(Je.a.Item,{onClick:a},"Log out"))),!x(t)&&r.a.createElement(Xe,null)))}),et=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.users;return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Users list route"),e.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("ul",null,r.a.createElement("li",null,e.Username),r.a.createElement("li",null,e.Email)))})):null}}]),t}(n.Component),tt=function(e){return r.a.createElement("div",null,"Footer bro"," ",r.a.createElement("span",{"aria-label":"emoji",role:"img"},"\ud83c\udf7f"))},at=a(128),nt=a.n(at),rt=(a(211),{setMovies:function(e){return{type:"SET_MOVIES",value:e}},setUser:function(e){return{type:"SET_USER",value:e}},setUsers:function(e){return{type:"SET_USERS",value:e}}}),ot=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedMovie:null,modalShow:{login:!1,register:!1},toastMessage:{type:"",show:!1}},a.onLoggedIn=function(e){localStorage.setItem("token",e.token),localStorage.setItem("username",e.user.Username),a.props.setUser(e.user),a.setState({toastMessage:{type:"success",show:!0}},function(){a.getMoviesList(),a.getUsersList(),setTimeout(function(){return a.setState({toastMessage:{show:!1}})},3e3)})},a.onRegister=function(){setTimeout(a.onModalClose("register"),0),setTimeout(a.onModalShow("login"),0)},a.onLoggedOut=function(){localStorage.removeItem("token"),localStorage.removeItem("username"),setTimeout(function(){return window.location.href="/myFlixApp"},0)},a.onModalClose=function(e){return function(){"login"===e&&a.setState({modalShow:{login:!1}}),"register"===e&&a.setState({modalShow:{register:!1}})}},a.onModalShow=function(e){return function(){"login"===e&&a.setState({modalShow:{login:!0}}),"register"===e&&a.setState({modalShow:{register:!0}})}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("token");case 3:if(null===e.sent){e.next=11;break}return e.next=7,this.getCurrentUser();case 7:return e.next=9,this.getMoviesList();case 9:return e.next=11,this.getUsersList();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("componentDidMount",e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("username");case 3:return t=e.sent,e.next=6,localStorage.getItem("token");case 6:return a=e.sent,e.next=9,z(t,a);case 9:n=e.sent,r=n.status,o=n.data,201===r&&this.props.setUser(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("getCurrentUser",e.t0);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"getMoviesList",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("token");case 3:return t=e.sent,e.next=6,J(t);case 6:a=e.sent,n=a.status,r=a.data,201===n&&this.props.setMovies(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("getMovies",e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"getUsersList",value:function(){var e=Object(g.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("token");case 3:return t=e.sent,e.next=6,q(t);case 6:a=e.sent,n=a.status,r=a.data,201===n&&this.props.setUsers(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("getUsers",e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.modalShow,n=t.toastMessage,o=this.props,c=o.movies,l=o.users,i=o.user;return r.a.createElement(E.a,null,r.a.createElement(nt.a,null,r.a.createElement(Ze,{user:i,onLoggedOut:this.onLoggedOut}),r.a.createElement("div",{className:"main-view"},r.a.createElement(b.a,{exact:!0,path:"/myFlixApp",render:function(){return r.a.createElement(ne,{user:i,modalShow:a,onModalClose:e.onModalClose,onModalShow:e.onModalShow,onRegister:e.onRegister,onLoggedIn:e.onLoggedIn})}}),r.a.createElement(b.a,{exact:!0,path:"/movies",render:function(){return x(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading movies...")):r.a.createElement(Me,null)}}),r.a.createElement(b.a,{path:"/movies/:movieId",render:function(e){var t=e.match;return x(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading the movie...")):r.a.createElement(me,{movie:c.find(function(e){return e._id===t.params.movieId})})}}),r.a.createElement(b.a,{path:"/directors/:name",render:function(e){var t=e.match;return x(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading the director...")):r.a.createElement(ce,{movie:c.find(function(e){return e.Director.Name===t.params.name})})}}),r.a.createElement(b.a,{exact:!0,path:"/genres/:name",render:function(e){var t=e.match;return x(c)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Loading the genres...")):r.a.createElement(le,{movie:c.find(function(e){return e.Genre.Name===t.params.name})})}}),r.a.createElement(b.a,{path:"/users",render:function(){return x(l)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"You must be logged in to view users list.")):r.a.createElement(et,{users:l})}}),r.a.createElement(b.a,{path:"/profile/:username",render:function(e){var t=e.match;return x(i)?r.a.createElement("div",{className:"loading-view"},r.a.createElement("p",null,"Login to view your profile.")):r.a.createElement(Ge,{user:i===t.params.username?i&&i:l&&l.find(function(e){return e.Username===t.params.username}),token:localStorage.getItem("token")})}}),r.a.createElement(Se.a,null,r.a.createElement(tt,null),n.show&&r.a.createElement(M,{position:"absolute",variant:n.type},"success"===n.type&&"Success!")))))}}]),t}(n.Component),ct=Object(p.b)(function(e){return{movies:e.movies,user:e.user,users:e.users}},rt)(ot),lt=(a(212),Object(d.c)(v)),it=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:lt},r.a.createElement(ct,null))}}]),t}(n.Component);a(213),a(214),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(it,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[129,1,2]]]);
//# sourceMappingURL=main.5ea69ec9.chunk.js.map